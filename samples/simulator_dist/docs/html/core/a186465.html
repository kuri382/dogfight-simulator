<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASRCAISim1: Agent が入出力 observables と commands の形式</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="asrc_doc_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ASRCAISim1
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('a186465.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Agent が入出力 observables と commands の形式 </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>このページでは、第4回空戦AIチャレンジのシナリオで <a class="el" href="a181948.html" title="Asset のうち、行動判断を行う主体としてシミュレータ外部とObservation,Actionを入出力するものを表すクラス">Agent</a> が <a class="el" href="a182220.html" title="戦闘機を表すクラス">Fighter</a> から受け取ることのできる observables と、 <a class="el" href="a182220.html" title="戦闘機を表すクラス">Fighter</a> に渡す必要のある commands の形式を説明する。</p>
<h1 class="doxsection"><a class="anchor" id="section_r7_contest_agent_observables"></a>
Agent が受け取ることのできる observables</h1>
<p><a class="el" href="a181948.html" title="Asset のうち、行動判断を行う主体としてシミュレータ外部とObservation,Actionを入出力するものを表すクラス">Agent</a> が受け取ることのできる observablesは以下の形式である。</p>
<p>なお、 <a class="el" href="a182368.html" title="あるPhysicalAssetの運動状態を保持するクラス">MotionState</a> 、 <a class="el" href="a182784.html" title="3次元航跡情報を表すための基底クラス">Track3D</a> 、 <a class="el" href="a182792.html" title="2次元航跡情報を表すための基底クラス">Track2D</a> の部分も以下のようにjson化された値が入る。</p><ul>
<li><a class="el" href="a186454.html#section_simulation_MotionState_MotionState_json">MotionStateのjson表現</a></li>
<li><a class="el" href="a186457.html#section_simulation_Track_Track3D_json">Track3Dのjson表現</a></li>
<li><a class="el" href="a186457.html#section_simulation_Track_Track2D_json">Track2Dのjson表現</a></li>
</ul>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;isAlive&quot;</span>: bool, # 生存中か否か</div>
<div class="line">    <span class="stringliteral">&quot;spec&quot;</span>: { # 性能に関する値（戦闘中不変）</div>
<div class="line">        <span class="stringliteral">&quot;dynamics&quot;</span>: { # 運動性能に関する値</div>
<div class="line">            <span class="stringliteral">&quot;scale&quot;</span>: { # 運動性能の基準値からの変動倍率</div>
<div class="line">                <span class="stringliteral">&quot;vMin&quot;</span>: float, # 最小速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;vMax&quot;</span>: float, # 最大速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;accelMin&quot;</span>: float, # 最小加速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;accelMax&quot;</span>: float, # 最大加速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;rollMin&quot;</span>: float, # 最小ロール角速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;rollMax&quot;</span>: float, # 最大ロール角速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;pitchMin&quot;</span>: float, # 最小ピッチ角速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;pitchMax&quot;</span>: float, # 最大ピッチ角速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;yawMin&quot;</span>: float, # 最小ヨー角速度の倍率</div>
<div class="line">                <span class="stringliteral">&quot;yawMax&quot;</span>: float, # 最大ヨー角速度の倍率</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;propulsion&quot;</span>: { # 推進系(エンジン)の性能に関する値</div>
<div class="line">            <span class="stringliteral">&quot;fuelCapacity&quot;</span>: float, # 燃料タンクの容量[kg]</div>
<div class="line">            <span class="stringliteral">&quot;optCruiseFuelFlowRatePerDistance&quot;</span>: float, # 最適な(燃料消費が最小な)巡航高度・速度で水平飛行した際の単位距離あたりの燃料消費量[kg/m]</div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;weapon&quot;</span>: { # 武装に関する値</div>
<div class="line">            <span class="stringliteral">&quot;numMsls&quot;</span>: int, # 初期誘導弾数</div>
<div class="line">            <span class="stringliteral">&quot;missile&quot;</span>: { # 誘導弾性能に関する値</div>
<div class="line">                <span class="stringliteral">&quot;tMax&quot;</span>: float, # 誘導弾最大飛翔時間[s]</div>
<div class="line">                <span class="stringliteral">&quot;tBurn&quot;</span>: float, # 誘導弾燃焼時間[s]</div>
<div class="line">                <span class="stringliteral">&quot;hitD&quot;</span>: float, # 誘導弾命中半径[m]</div>
<div class="line">                <span class="stringliteral">&quot;thrust&quot;</span>: float, # 誘導弾推力[N]</div>
<div class="line">            }</div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;stealth&quot;</span>: { # 被探知性能に関する値</div>
<div class="line">            <span class="stringliteral">&quot;rcsScale&quot;</span>: float, # RCS スケール(無次元量として扱う)</div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;sensor&quot;</span>: { # センサに関する値</div>
<div class="line">            <span class="stringliteral">&quot;radar&quot;</span>: { # レーダに関する値 (護衛対象機のobservablesには含まれない)</div>
<div class="line">                <span class="stringliteral">&quot;Lref&quot;</span>: float, # 基準探知距離(rcsScale=1の目標に対する最大探知距離)[m]</div>
<div class="line">                <span class="stringliteral">&quot;thetaFOR&quot;</span>: float, # 探知可能覆域[rad]</div>
<div class="line">            },</div>
<div class="line">            <span class="stringliteral">&quot;mws&quot;</span>: { # <a class="code hl_class" href="a182552.html">MWS</a> に関する値</div>
<div class="line">                <span class="stringliteral">&quot;isEsmIsh&quot;</span>: bool, # 電波センサとして扱う場合にTrue、光波センサとして扱う場合にFalse</div>
<div class="line">                <span class="stringliteral">&quot;Lref&quot;</span>: float, # 基準探知距離[m]</div>
<div class="line">                <span class="stringliteral">&quot;thetaFOR&quot;</span>: float, # 探知可能覆域[rad]</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;motion&quot;</span>: <a class="code hl_class" href="a182368.html">MotionState</a>, #　現在の運動状態</div>
<div class="line">    <span class="stringliteral">&quot;propulsion&quot;</span>: { # 推進系(エンジン)の現在の状態量</div>
<div class="line">        <span class="stringliteral">&quot;fuelRemaining&quot;</span>: float, # 残燃料[kg]</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;sensor&quot;</span>: { # 現在の探知状況に関する値</div>
<div class="line">        <span class="stringliteral">&quot;radar&quot;</span>: { # 自機レーダの探知状況に関する値 (護衛対象機のobservablesには含まれない)</div>
<div class="line">            <span class="stringliteral">&quot;track&quot;</span>: list[<a class="code hl_class" href="a182784.html">Track3D</a>], # 自機レーダが探知した3次元航跡のリスト</div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;mws&quot;</span>: { # 自機 <a class="code hl_class" href="a182552.html">MWS</a> の探知状況に関する値</div>
<div class="line">            <span class="stringliteral">&quot;track&quot;</span>: list[<a class="code hl_class" href="a182792.html">Track2D</a>], # 自機 <a class="code hl_class" href="a182552.html">MWS</a> が探知した2次元航跡のリスト</div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;track&quot;</span>: list[<a class="code hl_class" href="a182784.html">Track3D</a>], # 編隊内で共有し統合された3次元航跡のリスト</div>
<div class="line">        <span class="stringliteral">&quot;trackSource&quot;</span>: list[list[str]], # 編隊内で共有し統合された3次元航跡それぞれの、統合元となった機体名のリストのリスト</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;weapon&quot;</span>: { # 現在の武装状況に関する値</div>
<div class="line">        <span class="stringliteral">&quot;remMsls&quot;</span>: int, # 現在の残弾数</div>
<div class="line">        <span class="stringliteral">&quot;nextMsl&quot;</span>: int, # 次に射撃する誘導弾の ID</div>
<div class="line">        <span class="stringliteral">&quot;launchable&quot;</span>: bool, # 現在射撃可能な状態か否か。残弾数が 0 でなく、かつ人間介入モデルの記憶容量が上限に達していない場合に可となる。</div>
<div class="line">        <span class="stringliteral">&quot;missiles&quot;</span>: list[dict], # 各誘導弾に関する observables のリスト(内訳は後述)</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;shared&quot;</span>: { # 味方から共有された情報</div>
<div class="line">        <span class="stringliteral">&quot;agent&quot;</span>: { # 味方から共有された、 <a class="code hl_class" href="a181948.html">Agent</a> に関する情報</div>
<div class="line">            <span class="stringliteral">&quot;obs&quot;</span>: dict, # 自陣営の <a class="code hl_class" href="a181948.html">Agent</a> 自身が生成した固有の observables であり、</div>
<div class="line"><span class="preprocessor">                         # それらを merge_patch したものが格納される。</span></div>
<div class="line"><span class="preprocessor">                         # 一例として、行動意図を表す&quot;decision&quot;は、各 parent の fullName をキーとしたdictとして格納されることになる。</span></div>
<div class="line">        },</div>
<div class="line">        <span class="stringliteral">&quot;fighter&quot;</span>: dict, # 味方機の observables。</div>
<div class="line"><span class="preprocessor">                         # 自身を含む各機の名称をキーとして、各機の observables のうち</span></div>
<div class="line"><span class="preprocessor">                         # 重複が無駄となる&quot;/shared/*&quot;、&quot;/sensor/track&quot;、&quot;/sensor/trackSource&quot;以外の値が格納される。</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aa181948_html"><div class="ttname"><a href="a181948.html">asrc::core::Agent</a></div><div class="ttdoc">Asset のうち、行動判断を行う主体としてシミュレータ外部とObservation,Actionを入出力するものを表すクラス</div><div class="ttdef"><b>Definition</b> <a href="a00803_source.html#l00028">Agent.h:28</a></div></div>
<div class="ttc" id="aa182368_html"><div class="ttname"><a href="a182368.html">asrc::core::MotionState</a></div><div class="ttdoc">あるPhysicalAssetの運動状態を保持するクラス</div><div class="ttdef"><b>Definition</b> <a href="a00785_source.html#l00037">MotionState.h:37</a></div></div>
<div class="ttc" id="aa182552_html"><div class="ttname"><a href="a182552.html">asrc::core::MWS</a></div><div class="ttdef"><b>Definition</b> <a href="a00857_source.html#l00101">Sensor.h:101</a></div></div>
<div class="ttc" id="aa182784_html"><div class="ttname"><a href="a182784.html">asrc::core::Track3D</a></div><div class="ttdoc">3次元航跡情報を表すための基底クラス</div><div class="ttdef"><b>Definition</b> <a href="a00779_source.html#l00095">Track.h:95</a></div></div>
<div class="ttc" id="aa182792_html"><div class="ttname"><a href="a182792.html">asrc::core::Track2D</a></div><div class="ttdoc">2次元航跡情報を表すための基底クラス</div><div class="ttdef"><b>Definition</b> <a href="a00779_source.html#l00168">Track.h:168</a></div></div>
</div><!-- fragment --><h2 class="doxsection"><a class="anchor" id="section_r7_contest_missile_observables"></a>
誘導弾に関するobservables</h2>
<p>observables["weapon"]["missiles"]のリストに格納される誘導弾のobservablesは以下の形式である。</p>
<p>launchedTの部分は<a class="el" href="a186456.html#section_simulation_TimeSystem_Time_json">Timeのjson表現</a>で格納される。</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;isAlive&quot;</span>: bool, # 生存中か否か</div>
<div class="line">    <span class="stringliteral">&quot;hasLaunched&quot;</span>: bool, # 発射済みか否か</div>
<div class="line">    <span class="stringliteral">&quot;launchedT&quot;</span>: Time, # 発射時刻。未発射の場合は無効な値。</div>
<div class="line">    <span class="stringliteral">&quot;mode&quot;</span>: str, # 目標の追尾状況であり、以下の3種類のいずれか。</div>
<div class="line"><span class="preprocessor">                 # - &quot;guided&quot;: 母機から供給された航跡を使用中</span></div>
<div class="line"><span class="preprocessor">                 # - &quot;self&quot;: 自身のセンサで捉えた航跡を使用中</span></div>
<div class="line"><span class="preprocessor">                 # - &quot;memory&quot;: メモリトラックにより外挿中</span></div>
<div class="line">    <span class="stringliteral">&quot;target&quot;</span>: Track3D # 目標の3次元航跡</div>
<div class="line">}</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="section_r7_contest_agent_commands"></a>
Agent が出力すべき commands</h1>
<p><a class="el" href="a181948.html" title="Asset のうち、行動判断を行う主体としてシミュレータ外部とObservation,Actionを入出力するものを表すクラス">Agent</a> が <a class="el" href="a182220.html" title="戦闘機を表すクラス">Fighter</a> に渡す必要のある commands 以下の形式である。</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;motion&quot;</span>: {</div>
<div class="line"><span class="preprocessor">        # 飛行制御モードが&quot;direct&quot;の場合</span></div>
<div class="line">        <span class="stringliteral">&quot;roll&quot;</span>: float, # ロールに関する指示([-1,+1]で正規化し、負側を左旋回とする。)</div>
<div class="line">        <span class="stringliteral">&quot;pitch&quot;</span>: float, # ピッチに関する指示([-1,+1]で正規化し、負側を下降とする。)</div>
<div class="line">        <span class="stringliteral">&quot;yaw&quot;</span>: float, # ヨーに関する指示([-1,+1]で正規化し、負側を左旋回とする。)</div>
<div class="line">        <span class="stringliteral">&quot;throttle&quot;</span>: <span class="keywordtype">float</span> # 加減速による速度指示([-1,+1]で正規化し、負側を減速とする。) ※accelとthrottleはいずれか一つのみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;accel&quot;</span>: <span class="keywordtype">float</span>  # スロットルによる速度指示([0,+1]で正規化する。) ※accelとthrottleはいずれか一つのみ指定可。</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">        # 飛行制御モードが&quot;fromDirAndVel&quot;の場合</span></div>
<div class="line">        <span class="stringliteral">&quot;dstDir&quot;</span>: [float,float,float], # 目標進行方向(単位ベクトル) ※dstDirとdstTurnRateはいずれか一つのみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;dstTurnRate&quot;</span>: float, # 目標旋回率[rad/s] ※dstDirとdstTurnRateはいずれか一つのみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;dstAlt&quot;</span>: float, # 目標高度[m] ※dstDirを指定した場合のみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;dstV&quot;</span>: float, # 目標速度[m/s] ※ dstV,dstAccel,dstThrust,dstThrottleはいずれか一つのみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;dstAccel&quot;</span>: float, # 目標加速度[m/s^2] ※ dstV,dstAccel,dstThrust,dstThrottleはいずれか一つのみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;dstThrust&quot;</span>: float, # 目標推力[N] ※ dstV,dstAccel,dstThrust,dstThrottleはいずれか一つのみ指定可。</div>
<div class="line">        <span class="stringliteral">&quot;dstThrottle&quot;</span>: float, # 目標スロットル([0,+1]で正規化) ※ dstV,dstAccel,dstThrust,dstThrottleはいずれか一つのみ指定可。</div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;weapon&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;launch&quot;</span>: bool, # 射撃するか否か</div>
<div class="line">        <span class="stringliteral">&quot;target&quot;</span>: Track3D # 射撃する対象の 3 次元航跡</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1 class="doxsection"><a class="anchor" id="section_r7_contest_agent_accessible_accessors"></a>
Agent が アクセス可能な Accessor</h1>
<p><a class="el" href="a181948.html" title="Asset のうち、行動判断を行う主体としてシミュレータ外部とObservation,Actionを入出力するものを表すクラス">Agent</a> は、 observables と commads 以外にも、以下の Accessor を用いて環境との相互作用が可能である。</p>
<ul>
<li><p class="startli">parents の Accessor</p>
<p class="startli">メンバ変数 <a class="el" href="a181948.html#a747a7a23b8475a2fd2f37e78b5d56e24">parents</a>の値は、オープン部門、ユース部門ともに、 R7ContestMassPointFighterクラスとともに定義された R7ContestMassPointFighterAccessor のインスタンスである。 利用可能なメンバの一覧はリンク先を参照されたい。</p>
</li>
<li><p class="startli"><a class="el" href="a182516.html" title="シミュレーションのルールを定義するクラス">Ruler</a> の Accessor</p>
<p class="startli">メンバ変数 rulerは、オープン部門、ユース部門ともに、 <a class="el" href="a182524.html" title="Ruler とその派生クラスのメンバに対するアクセス制限を実現するためのAccessorクラス。">RulerAccessor</a> のインスタンスである。 利用可能なメンバの一覧はリンク先を参照されたい。</p>
</li>
<li><p class="startli"><a class="el" href="a182596.html" title="gymnasium(OpenAI gym)のEnvとしてのインターフェースを持ったシミュレーション実行管理クラスの具象クラス。">SimulationManager</a> の Accessor</p>
<p class="startli">メンバ変数 <a class="el" href="a181948.html#a894c7c20840b465d0487e3b16484e47d">manager</a>は、オープン部門、ユース部門ともに、 <a class="el" href="a182624.html" title="Agent 用の SimulationManagerAccessor.">SimulationManagerAccessorForAgent</a> のインスタンスである。 利用可能なメンバの一覧はリンク先を参照されたい。 </p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
